import*as i from"fs";import{dirname as r}from"path";import w from"./../files.js";var g=async(a,f,l=2,c="",p,m=async t=>t,u=async t=>await i.promises.readFile(t,"utf-8"))=>{const t={files:0,total:0};for(const o of(await new w().in(a).by(f)).not(p).results){const n=o[0],s=o[1];try{const e=await m(await u(n));if(!e)continue;try{await i.promises.access(r(s),i.constants.W_OK)}catch{await i.promises.mkdir(r(s),{recursive:!0})}await i.promises.writeFile(s,e,"utf-8"),t.files++}catch{console.log(`Error: Cannot inline file ${n}!`)}}l>0&&t.files>0&&console.info(`\x1B[32mSuccessfully inlined a total of ${t.files} ${c.toUpperCase()} ${t.files===1?"file":"files"}.\x1B[39m`)};export{g as default};
