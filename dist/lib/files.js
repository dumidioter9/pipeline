import n from"fast-glob";import{fileURLToPath as f}from"url";import e from"./apply-to.js";class l{paths=new Map;results=new Map;in(i){const o=e(e(i,t=>t instanceof URL?f(t):t),t=>t.endsWith("/")?t:`${t}/`);if(o instanceof Map)for(const[t,s]of o)this.paths.set(s,t);else this.paths.set(o,o);return this}async by(i){for(const[o,t]of this.paths)for(const s of await n(`${i}`,{cwd:o,onlyFiles:!0}))this.results.set(`${o}${s}`,`${t}${s}`);return this}not(i){let o=new Set;if(typeof i<"u")if(i instanceof Array||i instanceof Set)for(const t of i)o.add(t);else o.add(i);for(const t of o){if(typeof t=="string")for(const s of this.results)(s[0].match(t)||s[1].match(t))&&this.results.delete(s[0]);if(typeof t=="function")for(const s of this.results)(t(s[0])||t(s[1]))&&this.results.delete(s[0])}return this}}export{l as default};
