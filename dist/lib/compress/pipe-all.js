import{minify as t}from"csso";import{minify as n}from"html-minifier-terser";import m from"sharp";import{optimize as p}from"svgo";import{minify as l}from"terser";import f from"./parse.js";import y from"./../vendor/sharp-read.js";var x=async(o,e,s=2)=>{for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const r=e[i];if(!r)continue;switch(i){case"css":{await f(o,"**/*.css",s,i,e?.exclude,a=>t(a,r).css);break}case"html":{await f(o,"**/*.html",s,i,e?.exclude,async a=>await n(a,r));break}case"js":{await f(o,"**/*.{js,mjs,cjs}",s,i,e?.exclude,async a=>(await l(a,r)).code);break}case"img":{await f(o,"**/*.{avci,avcs,avif,avifs,gif,heic,heics,heif,heifs,jfif,jif,jpe,jpeg,jpg,png,raw,tiff,webp}",s,i,e?.exclude,async a=>await y(a,r),async a=>m(a,{failOn:"none"}));break}case"svg":{await f(o,"**/*.svg",s,i,e?.exclude,async a=>{const c=p(a,r);if(typeof c.error<"u"&&console.log(c.error),typeof c.data<"u")return c.data});break}default:break}}};export{x as default};
