import{minify as t}from"csso";import{minify as n}from"html-minifier-terser";import m from"sharp";import{optimize as p}from"svgo";import{minify as l}from"terser";import c from"./parse.js";import y from"./../vendor/sharp-read.js";var x=async(o,e,s=2)=>{for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const r=e[i];if(!r)continue;switch(i){case"css":{await c(o,"**/*.css",s,i,e?.exclude,a=>t(a,r).css);break}case"html":{await c(o,"**/*.html",s,i,e?.exclude,async a=>await n(a,r));break}case"js":{await c(o,"**/*.{js,mjs,cjs}",s,i,e?.exclude,async a=>(await l(a,r)).code);break}case"img":{await c(o,"**/*.{avci,avcs,avif,avifs,gif,heic,heics,heif,heifs,jfif,jif,jpe,jpeg,jpg,png,raw,tiff,webp}",s,i,e?.exclude,async a=>await y(a,r),async a=>m(a));break}case"svg":{await c(o,"**/*.svg",s,i,e?.exclude,async a=>{const f=p(a,r);if(typeof f.error<"u"&&console.log(f.error),typeof f.data<"u")return f.data});break}default:break}}};export{x as default};
